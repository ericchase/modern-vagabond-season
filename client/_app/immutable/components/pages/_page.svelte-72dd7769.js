import{S as re,i as ae,s as oe,k,l as S,m as K,h as f,n as b,p as M,b as O,L as X,B as G,w as Z,a as T,q as U,x as $,c as x,r as A,F as i,y as ee,f as te,t as ne,z as se,M as be,N as ke,O as fe,P as ve,Q as _e,R as j,T as Se,U as Ee,V as Ie,o as Ve,u as le,A as Ke,W as Q}from"../../chunks/index-4bb46944.js";function Pe(s,e){function t(l){e(l)}return s.addEventListener("input",t),{destroy(){s.removeEventListener("input",t)}}}function De(s,e){function t(l){e(l)}return document.addEventListener("keydown",t,!0),{destroy(){document.removeEventListener("keydown",t,!0)}}}function He(s){let e,t,l;return{c(){e=k("div"),this.h()},l(r){e=S(r,"DIV",{class:!0,style:!0}),K(e).forEach(f),this.h()},h(){b(e,"class","paddle svelte-1jp2kqa"),M(e,"width",s[2]+"px"),M(e,"height",s[3]+"px"),M(e,"transform","translate( "+(s[5]?s[1]+(s[4]-s[2]):s[4])+"px, "+s[0]+"px )")},m(r,a){O(r,e,a),t||(l=X(De.call(null,e,s[6])),t=!0)},p(r,[a]){a&4&&M(e,"width",r[2]+"px"),a&8&&M(e,"height",r[3]+"px"),a&55&&M(e,"transform","translate( "+(r[5]?r[1]+(r[4]-r[2]):r[4])+"px, "+r[0]+"px )")},i:G,o:G,d(r){r&&f(e),t=!1,l()}}}let Te=0;function xe(s,e,t){let{containerHeight:l=0}=e,{containerWidth:r=0}=e,{upKey:a}=e,{downKey:I}=e,{width:h=20}=e,{height:_=60}=e,{x:H=0}=e,{y:g=0}=e,{reverse:V=!1}=e,E=l-_;function v(n){switch(n==null?void 0:n.key){case a:t(0,g=Math.max(g-10,Te));break;case I:t(0,g=Math.min(g+10,E));break}}return s.$$set=n=>{"containerHeight"in n&&t(7,l=n.containerHeight),"containerWidth"in n&&t(1,r=n.containerWidth),"upKey"in n&&t(8,a=n.upKey),"downKey"in n&&t(9,I=n.downKey),"width"in n&&t(2,h=n.width),"height"in n&&t(3,_=n.height),"x"in n&&t(4,H=n.x),"y"in n&&t(0,g=n.y),"reverse"in n&&t(5,V=n.reverse)},[g,r,h,_,H,V,v,l,a,I]}class me extends re{constructor(e){super(),ae(this,e,xe,He,oe,{containerHeight:7,containerWidth:1,upKey:8,downKey:9,width:2,height:3,x:4,y:0,reverse:5})}}function Ce(s){let e,t,l,r,a,I,h,_=`${s[0].borderWidth}px`,H=`${s[0].height}px`,g=`${s[0].width}px`,V,E,v,n,m,c,d;return l=new me({props:{containerHeight:s[0].height,containerWidth:s[0].width,upKey:"w",downKey:"s"}}),a=new me({props:{containerHeight:s[0].height,containerWidth:s[0].width,upKey:"ArrowUp",downKey:"ArrowDown",reverse:!0}}),{c(){e=k("div"),t=k("div"),Z(l.$$.fragment),r=T(),Z(a.$$.fragment),I=T(),h=k("div"),V=T(),E=k("div"),v=U("0 : 0"),n=T(),m=k("button"),c=U("Restart the game"),this.h()},l(y){e=S(y,"DIV",{});var p=K(e);t=S(p,"DIV",{id:!0,class:!0});var C=K(t);$(l.$$.fragment,C),r=x(C),$(a.$$.fragment,C),I=x(C),h=S(C,"DIV",{class:!0}),K(h).forEach(f),C.forEach(f),V=x(p),E=S(p,"DIV",{id:!0,class:!0});var W=K(E);v=A(W,"0 : 0"),W.forEach(f),n=x(p),m=S(p,"BUTTON",{id:!0,class:!0});var z=K(m);c=A(z,"Restart the game"),z.forEach(f),p.forEach(f),this.h()},h(){b(h,"class","ball svelte-o1nzx0"),b(t,"id","game-box"),b(t,"class","svelte-o1nzx0"),M(t,"border-width",_),M(t,"height",H),M(t,"width",g),b(E,"id","score"),b(E,"class","svelte-o1nzx0"),b(m,"id","restart"),b(m,"class","svelte-o1nzx0")},m(y,p){O(y,e,p),i(e,t),ee(l,t,null),i(t,r),ee(a,t,null),i(t,I),i(t,h),i(e,V),i(e,E),i(E,v),i(e,n),i(e,m),i(m,c),d=!0},p:G,i(y){d||(te(l.$$.fragment,y),te(a.$$.fragment,y),d=!0)},o(y){ne(l.$$.fragment,y),ne(a.$$.fragment,y),d=!1},d(y){y&&f(e),se(l),se(a)}}}function ze(s){return[{width:500,height:500,borderWidth:3}]}class Le extends re{constructor(e){super(),ae(this,e,ze,Ce,oe,{})}}function ge(s,e,t){const l=s.slice();return l[25]=e[t][0],l[26]=e[t][1][0],l[27]=e[t][1].slice(1),l}function ye(s,e,t){const l=s.slice();return l[30]=e[t],l}function we(s){let e,t=s[30]+"",l;return{c(){e=k("br"),l=U(t)},l(r){e=S(r,"BR",{}),l=A(r,t)},m(r,a){O(r,e,a),O(r,l,a)},p(r,a){a[0]&1&&t!==(t=r[30]+"")&&le(l,t)},d(r){r&&f(e),r&&f(l)}}}function pe(s){let e,t,l,r=s[25]+"",a,I,h,_=s[26]+"",H,g,V,E=s[27],v=[];for(let n=0;n<E.length;n+=1)v[n]=we(ye(s,E,n));return{c(){e=k("div"),t=k("div"),l=k("span"),a=U(r),I=T(),h=k("div"),H=U(_),g=T();for(let n=0;n<v.length;n+=1)v[n].c();V=T(),this.h()},l(n){e=S(n,"DIV",{class:!0});var m=K(e);t=S(m,"DIV",{});var c=K(t);l=S(c,"SPAN",{class:!0});var d=K(l);a=A(d,r),d.forEach(f),c.forEach(f),I=x(m),h=S(m,"DIV",{});var y=K(h);H=A(y,_),g=x(y);for(let p=0;p<v.length;p+=1)v[p].l(y);y.forEach(f),V=x(m),m.forEach(f),this.h()},h(){b(l,"class","timestamp"),b(e,"class","row svelte-1ahx24m")},m(n,m){O(n,e,m),i(e,t),i(t,l),i(l,a),i(e,I),i(e,h),i(h,H),i(h,g);for(let c=0;c<v.length;c+=1)v[c].m(h,null);i(e,V)},p(n,m){if(m[0]&1&&r!==(r=n[25]+"")&&le(a,r),m[0]&1&&_!==(_=n[26]+"")&&le(H,_),m[0]&1){E=n[27];let c;for(c=0;c<E.length;c+=1){const d=ye(n,E,c);v[c]?v[c].p(d,m):(v[c]=we(d),v[c].c(),v[c].m(h,null))}for(;c<v.length;c+=1)v[c].d(1);v.length=E.length}},d(n){n&&f(e),Ee(v,n)}}}function Me(s){let e,t,l,r,a,I,h,_,H,g,V,E,v,n,m,c,d,y,p,C,W,z,R,q,Y,N=s[0],P=[];for(let o=0;o<N.length;o+=1)P[o]=pe(ge(s,N,o));let u=[{class:"message"},s[5]],L={};for(let o=0;o<u.length;o+=1)L=be(L,u[o]);return z=new Le({}),{c(){e=k("meta"),t=T(),l=k("div"),r=k("div"),a=k("div"),I=U("Chat History"),h=T(),_=k("button"),H=U("Load"),g=T(),V=k("button"),E=U("Clear"),v=T(),n=k("div");for(let o=0;o<P.length;o+=1)P[o].c();m=T(),c=k("div"),d=k("textarea"),y=T(),p=k("button"),C=U("Send"),W=T(),Z(z.$$.fragment),this.h()},l(o){const D=ke("svelte-18j4dk3",document.head);e=S(D,"META",{name:!0,content:!0}),D.forEach(f),t=x(o),l=S(o,"DIV",{class:!0});var w=K(l);r=S(w,"DIV",{class:!0});var B=K(r);a=S(B,"DIV",{class:!0});var ie=K(a);I=A(ie,"Chat History"),ie.forEach(f),h=x(B),_=S(B,"BUTTON",{class:!0});var ce=K(_);H=A(ce,"Load"),ce.forEach(f),g=x(B),V=S(B,"BUTTON",{class:!0});var ue=K(V);E=A(ue,"Clear"),ue.forEach(f),B.forEach(f),v=x(w),n=S(w,"DIV",{class:!0});var he=K(n);for(let J=0;J<P.length;J+=1)P[J].l(he);he.forEach(f),m=x(w),c=S(w,"DIV",{class:!0});var F=K(c);d=S(F,"TEXTAREA",{class:!0}),K(d).forEach(f),y=x(F),p=S(F,"BUTTON",{class:!0,type:!0});var de=K(p);C=A(de,"Send"),de.forEach(f),F.forEach(f),w.forEach(f),W=x(o),$(z.$$.fragment,o),this.h()},h(){document.title="Chat",b(e,"name","description"),b(e,"content","Svelte demo app"),b(a,"class","small-cap-text svelte-1ahx24m"),b(_,"class","send svelte-1ahx24m"),M(_,"margin-left","auto"),b(V,"class","send svelte-1ahx24m"),b(r,"class","title svelte-1ahx24m"),b(n,"class","history svelte-1ahx24m"),fe(d,L),ve(d,"svelte-1ahx24m",!0),b(p,"class","send svelte-1ahx24m"),b(p,"type","button"),b(c,"class","ui svelte-1ahx24m"),b(l,"class","shell svelte-1ahx24m")},m(o,D){i(document.head,e),O(o,t,D),O(o,l,D),i(l,r),i(r,a),i(a,I),i(r,h),i(r,_),i(_,H),i(r,g),i(r,V),i(V,E),i(l,v),i(l,n);for(let w=0;w<P.length;w+=1)P[w].m(n,null);s[13](n),i(l,m),i(l,c),i(c,d),d.autofocus&&d.focus(),s[14](d),_e(d,s[4]),i(c,y),i(c,p),i(p,C),s[16](l),O(o,W,D),ee(z,o,D),R=!0,q||(Y=[j(_,"click",s[10]),j(V,"click",s[9]),j(d,"input",s[15]),j(d,"keydown",s[8]),X(Pe.call(null,d,s[7])),j(p,"click",s[11]),X(s[6].call(null,l))],q=!0)},p(o,D){if(D[0]&1){N=o[0];let w;for(w=0;w<N.length;w+=1){const B=ge(o,N,w);P[w]?P[w].p(B,D):(P[w]=pe(B),P[w].c(),P[w].m(n,null))}for(;w<P.length;w+=1)P[w].d(1);P.length=N.length}fe(d,L=Se(u,[{class:"message"},o[5]])),D[0]&16&&_e(d,o[4]),ve(d,"svelte-1ahx24m",!0)},i(o){R||(te(z.$$.fragment,o),R=!0)},o(o){ne(z.$$.fragment,o),R=!1},d(o){f(e),o&&f(t),o&&f(l),Ee(P,o),s[13](null),s[14](null),s[16](null),o&&f(W),se(z,o),q=!1,Ie(Y)}}}function We(s,e,t){let{data:l}=e,r=[["",["(click Load to show chat history)"]]],a,I,h,_="";const H={autocapitalize:"on",autocomplete:"on",autocorrect:"on",placeholder:"Enter Message",rows:1},g={eventSource:null,eventSourceErrorCount:0};function V(){var u;(u=g.eventSource)==null||u.close(),g.eventSourceErrorCount<3?(++g.eventSourceErrorCount,n()):(console.log("Problem connecting to server. Please try again later."),window.location.href="https://ericchase.github.io/web--serve/404.html")}function E(u){z(JSON.parse(u.data)),y()}function v(){g.eventSourceErrorCount=0}function n(){g.eventSource=new window.EventSource("/api/events"),g.eventSource.onerror=V,g.eventSource.onmessage=E,g.eventSource.onopen=v}function m(u){var o;function L(){var D;if(window.visualViewport){const w=.7*((D=window.visualViewport)==null?void 0:D.height);I.style.setProperty("max-height",`${w}px`),y()}}return(o=window.visualViewport)==null||o.addEventListener("resize",L),{destroy(){var D;(D=window.visualViewport)==null||D.removeEventListener("resize",L)}}}function c(){t(4,_=""),t(3,h.value="",h),h.focus()}function d(){const{padding:u}=window.getComputedStyle(h);h.style.setProperty("height","0"),h.style.setProperty("height",`calc(${h.scrollHeight}px - ${u}*2)`)}async function y(){await Ke(),t(1,a.scrollTop=a.scrollHeight,a),t(1,--a.scrollTop,a)}function p(u){switch(u.key){case"Enter":!u.ctrlKey&&!u.shiftKey&&(u.preventDefault(),R());break;case"Escape":t(4,_="");break}}function C(){t(0,r=[])}async function W(){const u=await l.getHistory();C();for(const L of u)z(L);y()}function z(u){const L=u.slice(0,11),o=u.slice(11).split(`
`);t(0,r=[...r,[L,o]])}function R(){l.sendMessage(_.trim()),c(),d()}Ve(function(){n(),d(),y()});function q(u){Q[u?"unshift":"push"](()=>{a=u,t(1,a)})}function Y(u){Q[u?"unshift":"push"](()=>{h=u,t(3,h)})}function N(){_=this.value,t(4,_)}function P(u){Q[u?"unshift":"push"](()=>{I=u,t(2,I)})}return s.$$set=u=>{"data"in u&&t(12,l=u.data)},[r,a,I,h,_,H,m,d,p,C,W,R,l,q,Y,N,P]}class Ue extends re{constructor(e){super(),ae(this,e,We,Me,oe,{data:12},null,[-1,-1])}}export{Ue as default};
